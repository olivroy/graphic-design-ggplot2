<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 The Concepts of {ggplot2} | Graphic Design with ggplot2</title>
  <meta name="description" content="Create Beautiful, Publication–Ready Data Visualizations in R" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 The Concepts of {ggplot2} | Graphic Design with ggplot2" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Create Beautiful, Publication–Ready Data Visualizations in R" />
  <meta name="github-repo" content="z3tt/graphic-design-ggplot2" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 The Concepts of {ggplot2} | Graphic Design with ggplot2" />
  
  <meta name="twitter:description" content="Create Beautiful, Publication–Ready Data Visualizations in R" />
  

<meta name="author" content="Cédric Scherer" />


<meta name="date" content="2023-01-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="a-walk-through-example.html"/>
<link rel="next" href="polish.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<script src="libs/kePrint/kePrint.js"></script>
<link href="libs/lightable/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>“Graphic Design with ggplot2”</b><br>Written by Cédric Scherer</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-read-this-book"><i class="fa fa-check"></i>Why read this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-read-this-book"><i class="fa fa-check"></i>How to read this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-information-and-conventions"><i class="fa fa-check"></i>Software information and conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#communication"><i class="fa fa-check"></i><b>1.1</b> Communicating Data</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#coding"><i class="fa fa-check"></i><b>1.2</b> Coding Visualizations</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#why"><i class="fa fa-check"></i><b>1.3</b> Why R and <strong>ggplot2</strong></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html"><i class="fa fa-check"></i><b>2</b> The Layered Grammar of Graphics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#ggplot"><i class="fa fa-check"></i><b>2.1</b> The {ggplot2} Package</a></li>
<li class="chapter" data-level="2.2" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#components"><i class="fa fa-check"></i><b>2.2</b> The Components of a ggplot</a></li>
<li class="chapter" data-level="2.3" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#key-components"><i class="fa fa-check"></i><b>2.3</b> Key Components</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#data"><i class="fa fa-check"></i><b>2.3.1</b> Data</a></li>
<li class="chapter" data-level="2.3.2" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#aesthetics"><i class="fa fa-check"></i><b>2.3.2</b> Aesthetics</a></li>
<li class="chapter" data-level="2.3.3" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#layers"><i class="fa fa-check"></i><b>2.3.3</b> Layers</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#additional-components"><i class="fa fa-check"></i><b>2.4</b> Additional Components</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#scales"><i class="fa fa-check"></i><b>2.4.1</b> Scales</a></li>
<li class="chapter" data-level="2.4.2" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#coords"><i class="fa fa-check"></i><b>2.4.2</b> Coordinate Systems</a></li>
<li class="chapter" data-level="2.4.3" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#facets"><i class="fa fa-check"></i><b>2.4.3</b> Facets</a></li>
<li class="chapter" data-level="2.4.4" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#themes"><i class="fa fa-check"></i><b>2.4.4</b> Themes</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="the-layered-grammar-of-graphics.html"><a href="the-layered-grammar-of-graphics.html#showcase"><i class="fa fa-check"></i><b>2.5</b> Showcase</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="get-started.html"><a href="get-started.html"><i class="fa fa-check"></i><b>3</b> Get Started</a>
<ul>
<li class="chapter" data-level="3.1" data-path="get-started.html"><a href="get-started.html#dataset"><i class="fa fa-check"></i><b>3.1</b> The Data Set</a></li>
<li class="chapter" data-level="3.2" data-path="get-started.html"><a href="get-started.html#rstats"><i class="fa fa-check"></i><b>3.2</b> Working in R</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="get-started.html"><a href="get-started.html#import"><i class="fa fa-check"></i><b>3.2.1</b> Import data</a></li>
<li class="chapter" data-level="3.2.2" data-path="get-started.html"><a href="get-started.html#workflows"><i class="fa fa-check"></i><b>3.2.2</b> Project-oriented workflows</a></li>
<li class="chapter" data-level="3.2.3" data-path="get-started.html"><a href="get-started.html#inspect"><i class="fa fa-check"></i><b>3.2.3</b> Inspect data</a></li>
<li class="chapter" data-level="3.2.4" data-path="get-started.html"><a href="get-started.html#classes"><i class="fa fa-check"></i><b>3.2.4</b> Data types</a></li>
<li class="chapter" data-level="3.2.5" data-path="get-started.html"><a href="get-started.html#preparation"><i class="fa fa-check"></i><b>3.2.5</b> Data preparation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html"><i class="fa fa-check"></i><b>4</b> A Walk-through Example</a>
<ul>
<li class="chapter" data-level="4.1" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#prep-ggplot"><i class="fa fa-check"></i><b>4.1</b> Prerequisites</a></li>
<li class="chapter" data-level="4.2" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#basics"><i class="fa fa-check"></i><b>4.2</b> Create a basic ggplot</a></li>
<li class="chapter" data-level="4.3" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#combined-layers"><i class="fa fa-check"></i><b>4.3</b> Combine multiple layers</a></li>
<li class="chapter" data-level="4.4" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#map-aesthetics"><i class="fa fa-check"></i><b>4.4</b> Mapping aesthetics in layers</a></li>
<li class="chapter" data-level="4.5" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#set-properties"><i class="fa fa-check"></i><b>4.5</b> Setting properties in layers</a></li>
<li class="chapter" data-level="4.6" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#faceting"><i class="fa fa-check"></i><b>4.6</b> Create small multiples</a></li>
<li class="chapter" data-level="4.7" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#axis-scaling"><i class="fa fa-check"></i><b>4.7</b> Change the axis scaling</a></li>
<li class="chapter" data-level="4.8" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#color-scaling"><i class="fa fa-check"></i><b>4.8</b> Use a custom color palette</a></li>
<li class="chapter" data-level="4.9" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#label-adjustment"><i class="fa fa-check"></i><b>4.9</b> Adjust labels</a></li>
<li class="chapter" data-level="4.10" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#complete-themes"><i class="fa fa-check"></i><b>4.10</b> Apply a complete theme</a></li>
<li class="chapter" data-level="4.11" data-path="a-walk-through-example.html"><a href="a-walk-through-example.html#custom-theming"><i class="fa fa-check"></i><b>4.11</b> Customize the theme</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-concepts-of-ggplot2.html"><a href="the-concepts-of-ggplot2.html"><i class="fa fa-check"></i><b>5</b> The Concepts of {ggplot2}</a></li>
<li class="part"><span><b>I How To Polish Your Graphics</b></span></li>
<li class="chapter" data-level="6" data-path="polish.html"><a href="polish.html"><i class="fa fa-check"></i><b>6</b> Quick Steps to Improve Your Graphic</a></li>
<li class="chapter" data-level="7" data-path="working-with-axes.html"><a href="working-with-axes.html"><i class="fa fa-check"></i><b>7</b> Working with Axes</a></li>
<li class="chapter" data-level="8" data-path="text.html"><a href="text.html"><i class="fa fa-check"></i><b>8</b> Working with Text</a>
<ul>
<li class="chapter" data-level="8.1" data-path="text.html"><a href="text.html#titles"><i class="fa fa-check"></i><b>8.1</b> Titles</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="more-to-say.html"><a href="more-to-say.html"><i class="fa fa-check"></i><b>A</b> More to Say</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<hr class="grey"><li><i><a href="https://bookdown.org" target="blank">Published with bookdown</a></i></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Graphic Design with ggplot2</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-concepts-of-ggplot2" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> The Concepts of {ggplot2}<a href="the-concepts-of-ggplot2.html#the-concepts-of-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Creating a basic ggplot</p>
<p>First, to be able to use the functionality of ggplot2 we have to load the package (which we can also load via the tidyverse package collection):</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="the-concepts-of-ggplot2.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(tidyverse)</span></span>
<span id="cb42-2"><a href="the-concepts-of-ggplot2.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>The syntax of ggplot2 is very different from plotting functionality of provided by base R. We always start to define a plotting object by calling ggplot(data = df) which just tells ggplot2 that we are going to work with that data. In most cases, you might want to plot two variables—one on the x and one on the y axis. These are positional aesthetics and thus we add aes(x = var1, y = var2) to the ggplot() call (yes, the aes() stands for aesthetics). However, there are also cases where one has to specify only one or even three or more variables.</p>
<p class="note">
<p>We specify the data outside aes() and add the variables that ggplot maps the aesthetics to inside aes().</p>
</p>
<p>Here, we map the variable date to the x position and the variable temp to the y position. Later, we will also map variables to all kind of other aesthetics such as color, size, and shape.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="the-concepts-of-ggplot2.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> bikes, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count))</span></code></pre></div>
<p>Only a panel is created when running this. Why? This is because ggplot2 does not know how we want to plot that data—we still need to provide a geometry!</p>
<p>ggplot2 allows you to store the current ggobject in a variable of your choice by assigning it to a variable, in our case called g. You can extend this ggobject later by adding other layers, either all at once or by assigning it to the same or another variable.</p>
<p class="note">
<p>Thanks to implicit matching we can rewrite the code as follows: ggplot(bikes, aes(date, count)). But be aware that the order matters! I suggest to use a mixture if you feel confident to do so.</p>
</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="the-concepts-of-ggplot2.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count))</span></code></pre></div>
<p class="note">
<p>Omitting the arguments data and mapping saves you a ton of typing when creating dozens to hundreds ggplot’s per day but being specific about x and y is a good idea. This is the syntax I am using throughout the book.</p>
</p>
<p>There are many, many different geometries (called geoms because each function usually starts with geom_) one can add to a ggplot by default (see here for a full list) and even more provided by extension packages (see here for a collection of extension packages). Let’s tell ggplot2 which style we want to use, for example by adding geom_point() to create a scatter plot:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="the-concepts-of-ggplot2.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count)) <span class="sc">+</span> </span>
<span id="cb45-2"><a href="the-concepts-of-ggplot2.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:ggplot-default"></span>
<img src="bookdown_files/figure-html/ggplot-default-1.png" alt="A default scatter plot of temperature measured in Chicago created with the **ggplot2** package." width="864" />
<p class="caption">
FIGURE 5.1: A default scatter plot of temperature measured in Chicago created with the <strong>ggplot2</strong> package.
</p>
</div>
<p>One can also combine several geometric layers—and this is where the magic and fun starts!</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="the-concepts-of-ggplot2.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count)) <span class="sc">+</span> </span>
<span id="cb46-2"><a href="the-concepts-of-ggplot2.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb46-3"><a href="the-concepts-of-ggplot2.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:ggplot-default-line-point"></span>
<img src="bookdown_files/figure-html/ggplot-default-line-point-1.png" alt="Again, the same data, now shown as a connected scatterplot as a combination of points and lines." width="864" />
<p class="caption">
FIGURE 5.2: Again, the same data, now shown as a connected scatterplot as a combination of points and lines.
</p>
</div>
<p>That’s it for now about geometries. No worries, we are going to learn several plot types in Chapter charts.</p>
<p>Change Properties of Geometries</p>
<p>Within the geom_* command, you already can manipulate visual aesthetics such as the color, shape, and size of your points. Let’s turn all points to large fire-red diamonds!</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="the-concepts-of-ggplot2.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count)) <span class="sc">+</span> </span>
<span id="cb47-2"><a href="the-concepts-of-ggplot2.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;firebrick&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;diamond&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:ggplot-default-col-size-shape"></span>
<img src="bookdown_files/figure-html/ggplot-default-col-size-shape-1.png" alt="We can change the appearance of the geometry, here illustrated by turning the black dots in larger, red diamonds." width="864" />
<p class="caption">
FIGURE 5.3: We can change the appearance of the geometry, here illustrated by turning the black dots in larger, red diamonds.
</p>
</div>
<p class="note">
<p>ggplot2 understands both color and colour as well as the short version col.</p>
</p>
<p>You can use preset colors (here is a full list) or hex color codes, both in quotes, and even RGB/RGBA colors by using the rgb() function.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="the-concepts-of-ggplot2.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count)) <span class="sc">+</span> </span>
<span id="cb48-2"><a href="the-concepts-of-ggplot2.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;#b22222&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;diamond&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb48-3"><a href="the-concepts-of-ggplot2.html#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="the-concepts-of-ggplot2.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count)) <span class="sc">+</span> </span>
<span id="cb48-5"><a href="the-concepts-of-ggplot2.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="fu">rgb</span>(<span class="dv">178</span>, <span class="dv">34</span>, <span class="dv">34</span>, <span class="at">maxColorValue =</span> <span class="dv">255</span>), <span class="at">shape =</span> <span class="st">&quot;diamond&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>Each geom comes with its own properties (called arguments) and the same argument may result in a different change depending on the geom you are using.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="the-concepts-of-ggplot2.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count)) <span class="sc">+</span> </span>
<span id="cb49-2"><a href="the-concepts-of-ggplot2.html#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;firebrick&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;diamond&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb49-3"><a href="the-concepts-of-ggplot2.html#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">formula =</span> y  <span class="sc">~</span><span class="fu">poly</span>(x, <span class="dv">4</span>), <span class="at">se =</span> <span class="cn">FALSE</span>, </span>
<span id="cb49-4"><a href="the-concepts-of-ggplot2.html#cb49-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> <span class="st">&quot;gray40&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:ggplot-default-line-col-size-shape"></span>
<img src="bookdown_files/figure-html/ggplot-default-line-col-size-shape-1.png" alt="You can style each geometrical layer on its own. Each geometry also comes with a set of individual properties." width="864" />
<p class="caption">
FIGURE 5.4: You can style each geometrical layer on its own. Each geometry also comes with a set of individual properties.
</p>
</div>
<p>Mapping Data to Aesthetics</p>
<p>You already have seen two positional aesthetics, x and y that can be used in combination with the aes() function to map variables to the x- and y-axis, respectively. There are many more aesthetic attributes we are going to use throughout the book. Some are related to positions such as ymin and ymax while others change the appearance of the layer based on the variables they are mapped to such as color and shape.</p>
<p>As with the x and y, the mapping needs to be wrapped into aes() so that ggplot knows that you are referring to columns of your data set. There are two different levels on which you can apply aesthetic mappings: either for all layers or for individual layers only.</p>
<p>In case we want to color our points based on the period of the day to reveal the two patterns, we add aes(color = day_night) to our point layer geom_point():</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="the-concepts-of-ggplot2.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count)) <span class="sc">+</span> </span>
<span id="cb50-2"><a href="the-concepts-of-ggplot2.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> day_night)) <span class="sc">+</span></span>
<span id="cb50-3"><a href="the-concepts-of-ggplot2.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:ggplot-aes-layer"></span>
<img src="bookdown_files/figure-html/ggplot-aes-layer-1.png" alt="By applying aesthetic mapping to the `day_night` variable in the point layers, the two groups can be identified. Note that **ggplot2** automatically adds a legend to the plot." width="864" />
<p class="caption">
FIGURE 5.5: By applying aesthetic mapping to the <code>day_night</code> variable in the point layers, the two groups can be identified. Note that <strong>ggplot2</strong> automatically adds a legend to the plot.
</p>
</div>
<p>By supplying the aesthetic mapping inside ggplot() all layers are applying the same mapping. Consequently, the grouping and coloring is also used for the smoothing:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="the-concepts-of-ggplot2.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count, <span class="at">color =</span> day_night)) <span class="sc">+</span> </span>
<span id="cb51-2"><a href="the-concepts-of-ggplot2.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb51-3"><a href="the-concepts-of-ggplot2.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:ggplot-aes-parent"></span>
<img src="bookdown_files/figure-html/ggplot-aes-parent-1.png" alt="Both, the points and the smoothing lines are encoded by daytime.  Because of that, the smoothing is hard to see and best visible in the legend." width="864" />
<p class="caption">
FIGURE 5.6: Both, the points and the smoothing lines are encoded by daytime. Because of that, the smoothing is hard to see and best visible in the legend.
</p>
</div>
<p>The aesthetic mapping to both, geom_point() and geom_smooth(), is also reflected in the legend which now shows points, lines, and ribbons.</p>
<p>Note that you can overwrite the mapping specified in ggplot() in individual layers by either supplying a fixed value to that property:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="the-concepts-of-ggplot2.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count, <span class="at">color =</span> day_night)) <span class="sc">+</span> </span>
<span id="cb52-2"><a href="the-concepts-of-ggplot2.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb52-3"><a href="the-concepts-of-ggplot2.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span>
<span id="cb52-4"><a href="the-concepts-of-ggplot2.html#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="the-concepts-of-ggplot2.html#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count, <span class="at">color =</span> day_night)) <span class="sc">+</span> </span>
<span id="cb52-6"><a href="the-concepts-of-ggplot2.html#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb52-7"><a href="the-concepts-of-ggplot2.html#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:ggplot-aes-parent-overwrite-plot"></span>
<img src="bookdown_files/figure-html/ggplot-aes-parent-overwrite-plot-1.png" alt="Overwriting the color encoding in the point (left) or the smoothing (right). Note that the grouping is removed as well which changes the behaviour of the smoothing geom." width="864" />
<p class="caption">
FIGURE 5.7: Overwriting the color encoding in the point (left) or the smoothing (right). Note that the grouping is removed as well which changes the behaviour of the smoothing geom.
</p>
</div>
<p>Replace the default ggplot2 theme</p>
<p>And to illustrate some more of ggplot’s versatility, let’s get rid of the grayish default ggplot2 look by setting a different built-in theme, e.g. theme_bw(). One can add a theme directly to a ggplot composition or setting a theme globally—by calling theme_set() all following plots will have the same black’n’white theme. In the same step, we can also increase the base_size of the plot elements. The default base size is 11 and tends to be too small, at least for my workflow.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="the-concepts-of-ggplot2.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">16</span>))</span>
<span id="cb53-2"><a href="the-concepts-of-ggplot2.html#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="the-concepts-of-ggplot2.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> temp_feel, <span class="at">y =</span> count, <span class="at">color =</span> day_night)) <span class="sc">+</span> </span>
<span id="cb53-4"><a href="the-concepts-of-ggplot2.html#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:remove-gray-background"></span>
<img src="bookdown_files/figure-html/remove-gray-background-1.png" alt="We can change the appearance for all following plots generated with **ggplot2** by globally setting another theme via `theme_set()`." width="864" />
<p class="caption">
FIGURE 5.8: We can change the appearance for all following plots generated with <strong>ggplot2</strong> by globally setting another theme via <code>theme_set()</code>.
</p>
</div>
<p>You can find more on how to use built-in themes and how to customize themes in the section themes. From the next chapter on, we will also use the theme() function to customize particular elements of the theme.</p>
<p class="note">
<p>theme() is an essential command to manually modify all kinds of theme elements (texts, rectangles, and lines). To see which details of a ggplot theme can be modified have a look here—and take some time, this is a looong list.</p>
</p>
<p>Export ggplot2 as graphic files</p>

</div>



            </section>

          </div>
        </div>
      </div>
<a href="a-walk-through-example.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="polish.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yihui/bookdown-crc/edit/master/05-concepts-geoms.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown.pdf", "bookdown.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
