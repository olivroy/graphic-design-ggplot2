% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames*,x11names*}{xcolor}
%
\documentclass[
]{krantz}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Graphic Design with ggplot2},
  pdfauthor={Cédric Scherer},
  colorlinks=true,
  linkcolor=Maroon,
  filecolor=Maroon,
  citecolor=Blue,
  urlcolor=Blue,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.33,0.33,0.33}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.61,0.61,0.61}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.06,0.06,0.06}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.5,0.5,0.5}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0,0,0}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.27,0.27,0.27}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.27,0.27,0.27}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.06,0.06,0.06}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.14,0.14,0.14}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.06,0.06,0.06}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0,0,0}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.27,0.27,0.27}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.43,0.43,0.43}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0,0,0}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.5,0.5,0.5}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.5,0.5,0.5}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0,0,0}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.5,0.5,0.5}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage[bf,singlelinecheck=off]{caption}
\usepackage[scale=.8]{sourcecodepro}

\usepackage{framed,color}
\definecolor{shadecolor}{RGB}{248,248,248}

\renewcommand{\textfraction}{0.05}
\renewcommand{\topfraction}{0.8}
\renewcommand{\bottomfraction}{0.8}
\renewcommand{\floatpagefraction}{0.75}

\renewenvironment{quote}{\begin{VF}}{\end{VF}}
\let\oldhref\href
\renewcommand{\href}[2]{#2\footnote{\url{#1}}}

\makeatletter
\newenvironment{kframe}{%
\medskip{}
\setlength{\fboxsep}{.8em}
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\renewenvironment{Shaded}{\begin{kframe}}{\end{kframe}}

\usepackage{makeidx}
\makeindex

\urlstyle{tt}

\usepackage{amsthm}
\makeatletter
\def\thm@space@setup{%
  \thm@preskip=8pt plus 2pt minus 4pt
  \thm@postskip=\thm@preskip
}
\makeatother

\frontmatter
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage[]{natbib}
\bibliographystyle{apalike}

\title{Graphic Design with ggplot2}
\author{Cédric Scherer}
\date{2021-07-16}

\begin{document}
\maketitle

% you may need to leave a few empty pages before the dedication page

%\cleardoublepage\newpage\thispagestyle{empty}\null
%\cleardoublepage\newpage\thispagestyle{empty}\null
%\cleardoublepage\newpage
\thispagestyle{empty}

\begin{center}
To my son,

without whom I should have finished this book two years earlier
%\includegraphics{images/dedication.pdf}
\end{center}

\setlength{\abovedisplayskip}{-5pt}
\setlength{\abovedisplayshortskip}{-5pt}

{
\hypersetup{linkcolor=}
\setcounter{tocdepth}{2}
\tableofcontents
}
\listoftables
\listoffigures
\hypertarget{preface}{%
\chapter*{Preface}\label{preface}}


Back in 2016, I had to prepare my PhD introductory talk. I planned to create a visualization using small multiples to visualize the outcomes of my simulation model. I was already using the R programing language for years and quickly came across the graphics library \{ggplot2\} which comes with the functionality to easily create small multiples.to visualize my data. I never liked the syntax and style of base plots in R, so I immediately felt in love with the idea of ggplot's \emph{Grammar of Graphics}. But because I was short on time, I plotted these figures by trial and error and with the help of lots of googling. The resource I came always back to was a blog entry called \href{http://zevross.com/blog/2014/08/04/beautiful-plotting-in-r-a-ggplot2-cheatsheet-3/}{Beautiful plotting in R: A ggplot2 cheatsheet by Zev Ross}. After giving the talk which contained some decent plots thanks to the blog post, I decided to go through this tutorial step-by-step. I learned so much from it and directly started modifying the codes and over the time I added additional code snippets, chart types and resources.

Fast forward to 2019. I successfully finished my PhD and started participating in a weekly data visualization challenge called \href{https://github.com/rfordatascience/tidytuesday/blob/master/README.md}{\#TidyTuesday}. TidyTuesday is an initative grown out of \href{https://www.twitter.com/kierisi}{Jesse Mostipak} and the \href{https://www.rfordatasci.com/}{R4DS Online Learning Community}, started by \href{https://www.twitter.com/thomas_mock}{Thomas Mock}. Every week, a raw data set is with the aim to explore and visualize the data with \{ggplot2\}. Thanks to my experience with the \{tidyverse\} and especially \{ggplot2\} during my PhD and the open-source approach of the challenge that made it possible to learn from other participants, my visualizations quickly became more advanced and complex.

A few months later, I started working as a freelance data visualization specialist. I am now using ggplot2 every day: for my scientific work, design requests, reproducible reports, and personal data visualization projects. Since the blog entry by Zev Ross was not updated sine January 2016, I decided to add more examples and tricks to my version, which was now hosted on my \href{https://www.cedricscherer.com/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/}{personal blog}. It became step by step a unique tutorial that now contains also the fantastic \{patchwork\}, \{ggtext\} and \{ggforce\} packages, a section of custom fonts and colors, a collection of R packages tailored to create interactive charts, and several new chart types. The updated version now contains \textasciitilde3.000 lines of code and 188 plots and received a lot of interest from ggplot2 users from a wide range of fields.

Today, on a sunny day in August 2021, this tutorial serves as the basis for the book you hold in your hands. I hope you enjoy it as much as I enjoyed learning and sharing ggplot2 wizardry!

\hypertarget{why-read-this-book}{%
\section*{Why read this book}\label{why-read-this-book}}


Often, people that use common graphic design and charting tools cannot believe what one can achieve with ggplot2---and I want to show them how one can create a publication-ready graphic that goes beyond the traditional scientific scatter or box plot.

ggplot2 is already used by a large and diverse group of graduates, researchers, and analysts and the current rise of R and the tidyverse will likely lead to an even increasing interest in this great plotting library. While there are many tutorials on ggplot2 tips and tricks provided by the R community, to my knowledge there is no book that specifically addresses the complete design of specific details up to building an ambitious multi-panel graphic with ggplot2. As a blend of strong grounding in academic foundations of data visualization and hands-on, practical codes, and implementation material, the book can be used as introductory material as well as a reference for more experienced ggplot2 practitioners.

The goal is to offer a book that contains everything needed to create appealing data visualizations with the help of the R library ``ggplot2''. The aim is to include the basics of ggplot2, a detailed how-to section on improving the overall design and readability, an overview of useful extension packages, and unique reference implementations of high-quality, state-of-the-art data visualizations. The book will also include a comprehensive inventory of data visualization techniques and good practice along the code examples.

The book is intended for students and professionals that are interested in learning ggplot2 and/or taking their default ggplots to the next level. Thus, the book is potentially interesting for ggplot2 novices and beginners, but hopefully also helpful and educational for proficient users.

\hypertarget{structure-of-the-book}{%
\section*{Structure of the book}\label{structure-of-the-book}}


Chapters \ref{introduction} introduces a new topic, and \ldots{}

\hypertarget{software-information-and-conventions}{%
\section*{Software information and conventions}\label{software-information-and-conventions}}


The book was written with the \textbf{knitr}\index{knitr} package \citep{xie2015} and the \textbf{bookdown}\index{bookdown} package \citep{R-bookdown} with the following setup:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{xfun}\SpecialCharTok{::}\FunctionTok{session\_info}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## R version 4.1.0 (2021-05-18)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 19041)
## 
## Locale:
##   LC_COLLATE=German_Germany.1252 
##   LC_CTYPE=German_Germany.1252   
##   LC_MONETARY=German_Germany.1252
##   LC_NUMERIC=C                   
##   LC_TIME=German_Germany.1252    
## system code page: 65001
## 
## Package version:
##   base64enc_0.1.3   bookdown_0.22    
##   compiler_4.1.0    digest_0.6.27    
##   evaluate_0.14     glue_1.4.2       
##   graphics_4.1.0    grDevices_4.1.0  
##   highr_0.9         htmltools_0.5.1.1
##   jsonlite_1.7.2    knitr_1.33       
##   magrittr_2.0.1    markdown_1.1     
##   methods_4.1.0     mime_0.11        
##   rlang_0.4.11      rmarkdown_2.9    
##   rstudioapi_0.13   stats_4.1.0      
##   stringi_1.7.3     stringr_1.4.0    
##   tinytex_0.32      tools_4.1.0      
##   utils_4.1.0       xfun_0.24        
##   yaml_2.2.1
\end{verbatim}

Package names are in bold text (e.g., \textbf{rmarkdown}), and inline code and filenames are formatted in a typewriter font (e.g., \texttt{knitr::knit(\textquotesingle{}foo.Rmd\textquotesingle{})}). Function names are followed by parentheses (e.g., \texttt{bookdown::render\_book()}).

\hypertarget{acknowledgments}{%
\section*{Acknowledgments}\label{acknowledgments}}


A lot of people helped me when I was writing the book.

\begin{flushright}
Cédric Scherer\\
Berlin, Germany
\end{flushright}

\hypertarget{about-the-author}{%
\chapter*{About the Author}\label{about-the-author}}


Frida Gomam is a famous lady. Police will always let her go.

\mainmatter

\hypertarget{introduction}{%
\chapter{Introduction}\label{introduction}}

\hypertarget{data}{%
\section{The Dataset}\label{data}}

We are using data from the \emph{National Morbidity and Mortality Air Pollution Study} (NMMAPS). To make the plots manageable we are limiting the data to Chicago and 1997--2000. For more detail on this data set, consult Roger Peng's book \href{http://www.springer.com/de/book/9780387781662}{Statistical Methods in Environmental Epidemiology with R}.
You can download the data we are using during this tutorial \href{https://github.com/Z3tt/R-Tutorials/blob/master/ggplot2/chicago-nmmaps.csv}{here} (but you don't have to).

We can import the data into our R session for example with \texttt{read\_csv()} from the \texttt{\{readr\}} package. To access the data later, we are storing it in a variable called \texttt{chic} by using the \emph{assignment arrow} \texttt{\textless{}-}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{chic }\OtherTok{\textless{}{-}}\NormalTok{ readr}\SpecialCharTok{::}\FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/Z3tt/R{-}Tutorials/master/ggplot2/chicago{-}nmmaps.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## -- Column specification -------------------------------
## cols(
##   city = col_character(),
##   date = col_date(format = ""),
##   death = col_double(),
##   temp = col_double(),
##   dewpoint = col_double(),
##   pm10 = col_double(),
##   o3 = col_double(),
##   time = col_double(),
##   season = col_character(),
##   year = col_double()
## )
\end{verbatim}

💡 \textbf{The \texttt{::} is called \emph{namespace} and can be used to access a function without loading the package. Here, you could also run \texttt{library(readr)} first and \texttt{chic\ \textless{}-\ read\_csv(...)} afterwards.}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tibble}\SpecialCharTok{::}\FunctionTok{glimpse}\NormalTok{(chic)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 1,461
## Columns: 10
## $ city     <chr> "chic", "chic", "chic", "chic", "chi~
## $ date     <date> 1997-01-01, 1997-01-02, 1997-01-03,~
## $ death    <dbl> 137, 123, 127, 146, 102, 127, 116, 1~
## $ temp     <dbl> 36.0, 45.0, 40.0, 51.5, 27.0, 17.0, ~
## $ dewpoint <dbl> 37.500, 47.250, 38.000, 45.500, 11.2~
## $ pm10     <dbl> 13.052, 41.949, 27.042, 25.073, 15.3~
## $ o3       <dbl> 5.659, 5.525, 6.289, 7.538, 20.761, ~
## $ time     <dbl> 3654, 3655, 3656, 3657, 3658, 3659, ~
## $ season   <chr> "Winter", "Winter", "Winter", "Winte~
## $ year     <dbl> 1997, 1997, 1997, 1997, 1997, 1997, ~
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(chic, }\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 10 x 10
##    city  date       death  temp dewpoint  pm10    o3
##    <chr> <date>     <dbl> <dbl>    <dbl> <dbl> <dbl>
##  1 chic  1997-01-01   137  36      37.5  13.1   5.66
##  2 chic  1997-01-02   123  45      47.2  41.9   5.53
##  3 chic  1997-01-03   127  40      38    27.0   6.29
##  4 chic  1997-01-04   146  51.5    45.5  25.1   7.54
##  5 chic  1997-01-05   102  27      11.2  15.3  20.8 
##  6 chic  1997-01-06   127  17       5.75  9.36 14.9 
##  7 chic  1997-01-07   116  16       7    20.2  11.9 
##  8 chic  1997-01-08   118  19      17.8  33.1   8.68
##  9 chic  1997-01-09   148  26      24    12.1  13.4 
## 10 chic  1997-01-10   121  16       5.38 24.8  10.4 
## # ... with 3 more variables: time <dbl>, season <chr>,
## #   year <dbl>
\end{verbatim}

\hypertarget{ggplot}{%
\section{\texorpdfstring{The \texttt{\{ggplot2\}} Package}{The \{ggplot2\} Package}}\label{ggplot}}

\begin{quote}
\texttt{ggplot2} is a system for declaratively creating graphics, based on \href{https://www.amazon.com/Grammar-Graphics-Statistics-Computing/dp/0387245448/ref=as_li_ss_tl?ie=UTF8\&qid=1477928463\&sr=8-1\&keywords=the+grammar+of+graphics\&linkCode=sl1\&tag=ggplot2-20\&linkId=f0130e557161b83fbe97ba0e9175c431}{The Grammar of Graphics}. You provide the data, tell \texttt{ggplot2} how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.
\end{quote}

A ggplot is built up from a few basic elements:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Data}:
  The raw data that you want to plot.
\item
  \textbf{Geometries} \texttt{geom\_}:
  The geometric shapes that will represent the data.
\item
  \textbf{Aesthetics} \texttt{aes()}:
  Aesthetics of the geometric and statistical objects, such as position, color, size, shape, and transparency
\item
  \textbf{Scales} \texttt{scale\_}:
  Maps between the data and the aesthetic dimensions, such as data range to plot width or factor values to colors.
\item
  \textbf{Statistical transformations} \texttt{stat\_}:
  Statistical summaries of the data, such as quantiles, fitted curves, and sums.
\item
  \textbf{Coordinate system} \texttt{coord\_}:
  The transformation used for mapping data coordinates into the plane of the data rectangle.
\item
  \textbf{Facets} \texttt{facet\_}:
  The arrangement of the data into a grid of plots.
\item
  \textbf{Visual themes} \texttt{theme()}:
  The overall visual defaults of a plot, such as background, grids, axes, default typeface, sizes and colors.
\end{enumerate}

💡 \textbf{The number of elements may vary depending on how you group them and whom you ask.}

\hypertarget{default}{%
\section{A Default ggplot}\label{default}}

First, to be able to use the functionality of \texttt{\{ggplot2\}} we have to load the package (which we can also load via the \href{https://www.tidyverse.org/}{tidyverse package collection}):

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#library(ggplot2)}
\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## -- Attaching packages -------------- tidyverse 1.3.1 --
\end{verbatim}

\begin{verbatim}
## v ggplot2 3.3.5     v purrr   0.3.4
## v tibble  3.1.2     v dplyr   1.0.7
## v tidyr   1.1.3     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.1
\end{verbatim}

\begin{verbatim}
## -- Conflicts ----------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
\end{verbatim}

The syntax of \texttt{\{ggplot2\}} is different from base R. In accordance with the basic elements, a default ggplot needs three things that you have to specify: the \emph{data}, \emph{aesthetics}, and a \emph{geometry}. We always start to define a plotting object by calling \texttt{ggplot(data\ =\ df)} which just tells \texttt{\{ggplot2\}} that we are going to work with that data. In most cases, you might want to plot two variables---one on the x and one on the y axis. These are \emph{positional aesthetics} and thus we add \texttt{aes(x\ =\ var1,\ y\ =\ var2)} to the \texttt{ggplot()} call (yes, the \texttt{aes()} stands for aesthetics). However, there are also cases where one has to specify one or even three or more variables.

💡 \textbf{We specify the data \emph{outside} \texttt{aes()} and add the variables that ggplot maps the aesthetics to \emph{inside} \texttt{aes()}.}

Here, we map the variable \texttt{date} to the x position and the variable \texttt{temp} to the y position. Later, we will also map variables to all kind of other aesthetics such as color, size, and shape.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(g }\OtherTok{\textless{}{-}} \FunctionTok{ggplot}\NormalTok{(chic, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ date, }\AttributeTok{y =}\NormalTok{ temp)))}
\end{Highlighting}
\end{Shaded}

\includegraphics{bookdown_files/figure-latex/ggplot-1.pdf}

Hm, only a panel is created when running this. Why? This is because \texttt{\{ggplot2\}} does not know \emph{how} we want to plot that data---we still need to provide a geometry!

\texttt{ggplot2} allows you to store the current \texttt{ggobject} in a variable of your choice by assigning it to a variable, in our case called \texttt{g}. You can extend this \texttt{ggobject} later by adding other layers, either all at once or by assigning it to the same or another variable.

💡 \textbf{By using parentheses while assigning an object, the object will be printed immediately (instead of writing \texttt{g\ \textless{}-\ ggplot(...)} and then \texttt{g} we simply write \texttt{(g\ \textless{}-\ ggplot(...))}).}

There are many, many different geometries (called \emph{geoms} because each function usually starts with \texttt{geom\_}) one can add to a ggplot by default (see \href{https://ggplot2.tidyverse.org/reference/}{here} for a full list) and even more provided by extension packages (see \href{https://exts.ggplot2.tidyverse.org/}{here} for a collection of extension packages). Let's tell \texttt{\{ggplot2\}} which style we want to use, for example by adding \texttt{geom\_point()} to create a scatter plot:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{g }\SpecialCharTok{+} \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{bookdown_files/figure-latex/ggplot-default-1.pdf}

Nice! But this data could be also visualized as a line plot (not optimal, but people do things like this all the time). So we simply add \texttt{geom\_line()} instead and voilá:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{g }\SpecialCharTok{+} \FunctionTok{geom\_line}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{bookdown_files/figure-latex/ggplot-default-line-1.pdf}

One can also combine several geometric layers---and this is where the magic and fun starts!

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{g }\SpecialCharTok{+} \FunctionTok{geom\_line}\NormalTok{() }\SpecialCharTok{+} \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{bookdown_files/figure-latex/ggplot-default-line-point-1.pdf}

That's it for now about geometries. No worries, we are going to learn several plot types in \ref{foo}.

\hypertarget{change-properties-of-geometries}{%
\paragraph{Change Properties of Geometries}\label{change-properties-of-geometries}}

Within the \texttt{geom\_*} command, you already can manipulate visual aesthetics such as the color, shape, and size of your points. Let's turn all points to large fire-red diamonds!

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{g }\SpecialCharTok{+} \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{color =} \StringTok{"firebrick"}\NormalTok{, }\AttributeTok{shape =} \StringTok{"diamond"}\NormalTok{, }\AttributeTok{size =} \DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{bookdown_files/figure-latex/ggplot-default-col-size-shape-1.pdf}

💡 \textbf{\texttt{\{ggplot2\}} understands both \texttt{color} and \texttt{colour} as well as the short version \texttt{col}.}

You can use preset colors (here is a \href{http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf}{full list}) or \href{https://www.techopedia.com/definition/29788/color-hex-code}{hex color codes}, both in quotes, and even RGB/RGBA colors by using the \texttt{rgb()} function.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{g }\SpecialCharTok{+} \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{color =} \StringTok{"\#b22222"}\NormalTok{, }\AttributeTok{shape =} \StringTok{"diamond"}\NormalTok{, }\AttributeTok{size =} \DecValTok{2}\NormalTok{)}
\NormalTok{g }\SpecialCharTok{+} \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{color =} \FunctionTok{rgb}\NormalTok{(}\DecValTok{178}\NormalTok{, }\DecValTok{34}\NormalTok{, }\DecValTok{34}\NormalTok{, }\AttributeTok{maxColorValue =} \DecValTok{255}\NormalTok{), }\AttributeTok{shape =} \StringTok{"diamond"}\NormalTok{, }\AttributeTok{size =} \DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{bookdown_files/figure-latex/ggplot-default-col-size-hex-rgb-plot-1.pdf}

Each geom comes with its own properties (called \emph{arguments}) and the same argument may result in a different change depending on the geom you are using.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{g }\SpecialCharTok{+} \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{color =} \StringTok{"firebrick"}\NormalTok{, }\AttributeTok{shape =} \StringTok{"diamond"}\NormalTok{, }\AttributeTok{size =} \DecValTok{2}\NormalTok{) }\SpecialCharTok{+}
    \FunctionTok{geom\_line}\NormalTok{(}\AttributeTok{color =} \StringTok{"firebrick"}\NormalTok{, }\AttributeTok{linetype =} \StringTok{"dotted"}\NormalTok{, }\AttributeTok{size =}\NormalTok{ .}\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{bookdown_files/figure-latex/ggplot-default-line_col-size-shape-1.pdf}

\hypertarget{replace-the-default-ggplot2-theme}{%
\paragraph{\texorpdfstring{Replace the default \texttt{ggplot2} theme}{Replace the default ggplot2 theme}}\label{replace-the-default-ggplot2-theme}}

And to illustrate some more of ggplot's versatility, let's get rid of the grayish default \texttt{\{ggplot2\}} look by setting a different built-in theme, e.g.~\texttt{theme\_bw()}---by calling \texttt{theme\_set()} all following plots will have the same black'n'white theme. The red points look way better now!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{theme\_set}\NormalTok{(}\FunctionTok{theme\_bw}\NormalTok{())}

\NormalTok{g }\SpecialCharTok{+} \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{color =} \StringTok{"firebrick"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{bookdown_files/figure-latex/remove-gray-background-1.pdf}

You can find more on how to use built-in themes and how to customize themes in the section \protect\hyperlink{themes}{``Working with Themes''}. From the next chapter on, we will also use the \texttt{theme()} function to customize particular elements of the theme.

💡 \textbf{\texttt{theme()} is an essential command to manually modify all kinds of theme elements (texts, rectangles, and lines).}

To see which details of a ggplot theme can be modified have a look \href{https://ggplot2.tidyverse.org/reference/theme.html}{here}---and take some time, this is a looong list.

\hypertarget{the-foo-method}{%
\chapter{The FOO Method}\label{the-foo-method}}

We talk about the \emph{FOO} method\index{FOO} in this chapter.

\cleardoublepage

\hypertarget{appendix-appendix}{%
\appendix \addcontentsline{toc}{chapter}{\appendixname}}


\hypertarget{more-to-say}{%
\chapter{More to Say}\label{more-to-say}}

Yeah! I have finished my book, but I have more to say about some topics. Let me explain them in this appendix.

To know more about \textbf{bookdown}, see \url{https://bookdown.org}.

  \bibliography{book.bib,packages.bib}

\backmatter
\printindex

\end{document}
